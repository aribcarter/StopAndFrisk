# Visualizing Stop and Frisk in NYC

## Inspiration
As part of my summer effort to practice data visualiztion, I chose to participate in the Storytelling with Data monthly challenge, and even though I was late to the party, wanted to do the [June Black and White Challenge](https://community.storytellingwithdata.com/challenges/52e943ac-9468-4b4e-a8d8-14eadd6a3394). I found the theme appropriate due to the BLM protests- a cause that emphasizes the contrast between black and white experiences, especially experiences related to policing. Thus, my goal for this visualiztion is to provide a sense of the qualitative and quantitative difference for how people of different races feel the NYPD's presence. 

My hope to make to make a page in the vein of Shirley Wu's [Movie Flower](http://bl.ocks.org/sxywu/raw/8d1b563586bf411383345e95a3418715/) visualization where black and white stop and frisk statistics as documented by the NYPD are visualized differently shaped breaks in glass as an allusion to broken window policing.

## Process
1. I first used R to port in 17 years of data from the NYPD and clean it so each year's datasheet plays nice with the others. The final CSV is in the public folder in the saf-pages directory.
2. I began outlining the project using only D3, but realized quickly that it would be easier to use this as an opportunity to learn other Javascript libraries that other data visualization people use, so after some research decided to learn Vue and Greensock for structuring and animating my D3. I ended up also learning Tailwind for styling and Jquery to access DOM elements for Greensock.
3. I tried to keep all the code as flexible as posssible, so I kept all the D3 functions and data in the top level and bound the data to child elements that could call different methods on their data. The major function I used was a ```MakeBreak()``` function that converted data for a certain year and race into an SVG inserted at an ID tag passed in the parameters. The rest of the functions were dedicated to either drawing zig-zags for the broken window illustrations or annotating the example break for the header. I developed a relatively scalable way to draw lines off other lines at a certain distance, which I only used for making arrows and zig-zags but theoretically could be used for many other uses. I will probably reuse this code a lot iin the future unless I find a better method. 
4. My use of GSAP was relatively trivial in this project as it is only used to fade the crack SVGs away on a mouse hover on a computer or finger press on mobile. However, it was a good introduction to using Jquery and Greensock timelines. 

## Challenges
- I had trouble verifying the accurateness of my data in R. I viewed the source datasheets a lot and cross referenced the [NYC ACLU's Published Numbers](https://www.nyclu.org/en/Stop-and-Frisk-data), but there were still several inconsistencies, most notably hundreds of thousands of fewer stops overall in the 2000's that I counted than were published by the ACLU. I contacted the woman on their staff who deals with the data to see if they counted a different way, but did not hear back. However, between independently computing totals for data cross-sections outside of the functions I wrote in R and accounting for edge-cases in the NYPD's data (like from 2017-2019 they only confirm weapons being present so there were many NULL values), I am confident that the data I publish in the visualization is accurate.
- The order Vue executes functions was a major problem when I began the project. Children components would call methods on data before it was loaded or before the scales were given proper parameters. After a good amount of playing around with promises and the reactivity of the data I found a solution. I'm not sure if this was beginner's struggles, but if I continue running into trouble making data load and visualize in future projects, I may have to learn more about how Javascript executes rather than hacking solutions together.
- I struggled briefly figuring out how to access the correct elements to add animations to with Greensock. I initially tried the same top-down attack strategy that I used with my D3 code, but ended up locally defining each animation in child components. 

## Future Improvements
- The big thing I want to add is a way to see the neighborhood-level data. I have a vision of using Club Greensock's SVG transition to turn the broken windows into a map of New York with data now represented neighborhood to neighborhood. 
- I wish I could make the 'broken windows' look more like breaks in glass, but I don't know how achievable this is with D3's path functionality. If I ever decide to splurge on Adobe Illustrator, finding a way to make a broken glass SVG that I can code path manipulations into based on data would be super neat. 
